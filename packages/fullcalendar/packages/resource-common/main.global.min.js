/*!
FullCalendar Scheduler v5.2.1
Docs & License: https://fullcalendar.io/scheduler
(c) 2020 Adam Shaw
*/
var FullCalendarResourceCommon=function(e,r,t){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var n=function(e,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(e,r)};function o(e,r){function t(){this.constructor=e}n(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}var s=function(){return(s=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)};function i(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;var n=Array(e),o=0;for(r=0;r<t;r++)for(var s=arguments[r],i=0,u=s.length;i<u;i++,o++)n[o]=s[i];return n}function u(e,r){var t=e.resourceEditable;if(null==t){var n=e.sourceId&&r.getCurrentData().eventSources[e.sourceId];n&&(t=n.extendedProps.resourceEditable),null==t&&null==(t=r.options.eventResourceEditable)&&(t=r.options.editable)}return t}var a=function(){function e(){this.filterResources=r.memoize(c)}return e.prototype.transform=function(e,r){if(r.viewSpec.optionDefaults.needsResourceData)return{resourceStore:this.filterResources(r.resourceStore,r.options.filterResourcesWithEvents,r.eventStore,r.dateProfile.activeRange),resourceEntityExpansions:r.resourceEntityExpansions}},e}();function c(e,t,n,o){if(t){var i=function(e,r){var t={};for(var n in e)for(var o=e[n],s=0,i=r[o.defId].resourceIds;s<i.length;s++){var u=i[s];t[u]=!0}return t}(function(e,t){return r.filterHash(e,(function(e){return r.rangesIntersect(e.range,t)}))}(n.instances,o),n.defs);return s(i,function(e,r){var t={};for(var n in e)for(var o=void 0;(o=r[n])&&(n=o.parentId);)t[n]=!0;return t}(i,e)),r.filterHash(e,(function(e,r){return i[r]}))}return e}var l=function(){function e(){this.buildResourceEventUis=r.memoize(d,r.isPropsEqual),this.injectResourceEventUis=r.memoize(p)}return e.prototype.transform=function(e,r){if(!r.viewSpec.optionDefaults.needsResourceData)return{eventUiBases:this.injectResourceEventUis(e.eventUiBases,e.eventStore.defs,this.buildResourceEventUis(r.resourceStore))}},e}();function d(e){return r.mapHash(e,(function(e){return e.ui}))}function p(e,t,n){return r.mapHash(e,(function(e,o){return o?function(e,t,n){for(var o=[],s=0,i=t.resourceIds;s<i.length;s++){var u=i[s];n[u]&&o.unshift(n[u])}return o.unshift(e),r.combineEventUis(o)}(e,t[o],n):e}))}var f=[];function h(e){f.push(e)}function v(e){return f[e]}function g(){return f}var y={id:String,resources:r.identity,url:String,method:String,startParam:String,endParam:String,timeZoneParam:String,extraParams:r.identity};function m(e){var t;if("string"==typeof e?t={url:e}:"function"==typeof e||Array.isArray(e)?t={resources:e}:"object"==typeof e&&e&&(t=e),t){var n=r.refineProps(t,y),o=n.refined;!function(e){for(var r in e)console.warn("Unknown resource prop '"+r+"'")}(n.extra);var s=function(e){for(var r=g(),t=r.length-1;t>=0;t--){var n=r[t].parseMeta(e);if(n)return{meta:n,sourceDefId:t}}}(o);if(s)return{_raw:e,sourceId:r.guid(),sourceDefId:s.sourceDefId,meta:s.meta,publicId:o.id||"",isFetching:!1,latestFetchId:"",fetchRange:null}}return null}function E(e,t,n){var o=n.options,i=n.dateProfile;if(!e||!t)return R(o.initialResources||o.resources,i.activeRange,o.refetchResourcesOnNavigate,n);switch(t.type){case"RESET_RESOURCE_SOURCE":return R(t.resourceSourceInput,i.activeRange,o.refetchResourcesOnNavigate,n);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return function(e,t,n,o){return!n||function(e){return Boolean(v(e.sourceDefId).ignoreRange)}(e)||e.fetchRange&&r.rangesEqual(e.fetchRange,t)?e:S(e,t,o)}(e,i.activeRange,o.refetchResourcesOnNavigate,n);case"RECEIVE_RESOURCES":case"RECEIVE_RESOURCE_ERROR":return function(e,r,t){if(r===e.latestFetchId)return s(s({},e),{isFetching:!1,fetchRange:t});return e}(e,t.fetchId,t.fetchRange);case"REFETCH_RESOURCES":return S(e,i.activeRange,n);default:return e}}function R(e,r,t,n){if(e){var o=m(e);return o=S(o,t?r:null,n)}return null}function S(e,t,n){var o=v(e.sourceDefId),i=r.guid();return o.fetch({resourceSource:e,range:t,context:n},(function(e){n.dispatch({type:"RECEIVE_RESOURCES",fetchId:i,fetchRange:t,rawResources:e.rawResources})}),(function(e){n.dispatch({type:"RECEIVE_RESOURCE_ERROR",fetchId:i,fetchRange:t,error:e})})),s(s({},e),{isFetching:!0,latestFetchId:i})}var C={id:String,parentId:String,children:r.identity,title:String,businessHours:r.identity,extendedProps:r.identity,eventEditable:Boolean,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventConstraint:r.identity,eventOverlap:Boolean,eventAllow:r.identity,eventClassNames:r.parseClassNames,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String};function b(e,t,n,o){void 0===t&&(t="");var i=r.refineProps(e,C),u=i.refined,a=i.extra,c={id:u.id||"_fc:"+r.guid(),parentId:u.parentId||t,title:u.title||"",businessHours:u.businessHours?r.parseBusinessHours(u.businessHours,o):null,ui:r.createEventUi({editable:u.eventEditable,startEditable:u.eventStartEditable,durationEditable:u.eventDurationEditable,constraint:u.eventConstraint,overlap:u.eventOverlap,allow:u.eventAllow,classNames:u.eventClassNames,backgroundColor:u.eventBackgroundColor,borderColor:u.eventBorderColor,textColor:u.eventTextColor,color:u.eventColor},o),extendedProps:s(s({},a),u.extendedProps)};if(Object.freeze(c.ui.classNames),Object.freeze(c.extendedProps),n[c.id]);else if(n[c.id]=c,u.children)for(var l=0,d=u.children;l<d.length;l++){b(d[l],c.id,n,o)}return c}function I(e){return 0===e.indexOf("_fc:")?"":e}function D(e,r,t,n){if(!e||!r)return{};switch(r.type){case"RECEIVE_RESOURCES":return function(e,r,t,n,o){if(n.latestFetchId===t){for(var s={},i=0,u=r;i<u.length;i++){b(u[i],"",s,o)}return s}return e}(e,r.rawResources,r.fetchId,t,n);case"ADD_RESOURCE":return o=e,i=r.resourceHash,s(s({},o),i);case"REMOVE_RESOURCE":return function(e,r){var t=s({},e);for(var n in delete t[r],t)t[n].parentId===r&&(t[n]=s(s({},t[n]),{parentId:""}));return t}(e,r.resourceId);case"SET_RESOURCE_PROP":return function(e,r,t,n){var o,i,u=e[r];return u?s(s({},e),((o={})[r]=s(s({},u),((i={})[t]=n,i)),o)):e}(e,r.resourceId,r.propName,r.propValue);case"SET_RESOURCE_EXTENDED_PROP":return function(e,r,t,n){var o,i,u=e[r];return u?s(s({},e),((o={})[r]=s(s({},u),{extendedProps:s(s({},u.extendedProps),(i={},i[t]=n,i))}),o)):e}(e,r.resourceId,r.propName,r.propValue);default:return e}var o,i}var P={resourceId:String,resourceIds:r.identity,resourceEditable:Boolean};var _=function(){function e(e,r){this._context=e,this._resource=r}return e.prototype.setProp=function(e,r){var t=this._resource;this._context.dispatch({type:"SET_RESOURCE_PROP",resourceId:t.id,propName:e,propValue:r}),this.sync(t)},e.prototype.setExtendedProp=function(e,r){var t=this._resource;this._context.dispatch({type:"SET_RESOURCE_EXTENDED_PROP",resourceId:t.id,propName:e,propValue:r}),this.sync(t)},e.prototype.sync=function(r){var t=this._context,n=r.id;this._resource=t.getCurrentData().resourceStore[n],t.emitter.trigger("resourceChange",{oldResource:new e(t,r),resource:this,revert:function(){var e;t.dispatch({type:"ADD_RESOURCE",resourceHash:(e={},e[n]=r,e)})}})},e.prototype.remove=function(){var e=this._context,r=this._resource,t=r.id;e.dispatch({type:"REMOVE_RESOURCE",resourceId:t}),e.emitter.trigger("resourceRemove",{resource:this,revert:function(){var n;e.dispatch({type:"ADD_RESOURCE",resourceHash:(n={},n[t]=r,n)})}})},e.prototype.getParent=function(){var r=this._context,t=this._resource.parentId;return t?new e(r,r.getCurrentData().resourceSource[t]):null},e.prototype.getChildren=function(){var r=this._resource.id,t=this._context,n=t.getCurrentData().resourceStore,o=[];for(var s in n)n[s].parentId===r&&o.push(new e(t,n[s]));return o},e.prototype.getEvents=function(){var e=this._resource.id,t=this._context,n=t.getCurrentData().eventStore,o=n.defs,s=n.instances,i=[];for(var u in s){var a=s[u],c=o[a.defId];-1!==c.resourceIds.indexOf(e)&&i.push(new r.EventApi(t,c,a))}return i},Object.defineProperty(e.prototype,"id",{get:function(){return I(this._resource.id)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this._resource.title},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventConstraint",{get:function(){return this._resource.ui.constraints[0]||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventOverlap",{get:function(){return this._resource.ui.overlap},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventAllow",{get:function(){return this._resource.ui.allows[0]||null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventBackgroundColor",{get:function(){return this._resource.ui.backgroundColor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventBorderColor",{get:function(){return this._resource.ui.borderColor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventTextColor",{get:function(){return this._resource.ui.textColor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventClassNames",{get:function(){return this._resource.ui.classNames},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"extendedProps",{get:function(){return this._resource.extendedProps},enumerable:!1,configurable:!0}),e.prototype.toPlainObject=function(e){void 0===e&&(e={});var r=this._resource,t=r.ui,n=this.id,o={};return n&&(o.id=n),r.title&&(o.title=r.title),e.collapseEventColor&&t.backgroundColor&&t.backgroundColor===t.borderColor?o.eventColor=t.backgroundColor:(t.backgroundColor&&(o.eventBackgroundColor=t.backgroundColor),t.borderColor&&(o.eventBorderColor=t.borderColor)),t.textColor&&(o.eventTextColor=t.textColor),t.classNames.length&&(o.eventClassNames=t.classNames),Object.keys(r.extendedProps).length&&(e.collapseExtendedProps?s(o,r.extendedProps):o.extendedProps=r.extendedProps),o},e.prototype.toJSON=function(){return this.toPlainObject()},e}();r.CalendarApi.prototype.addResource=function(e,r){var t,n=this;void 0===r&&(r=!0);var o,s,i=this.getCurrentData();e instanceof _?((t={})[(s=e._resource).id]=s,o=t):s=b(e,"",o={},i),this.dispatch({type:"ADD_RESOURCE",resourceHash:o}),r&&this.trigger("_scrollRequest",{resourceId:s.id});var u=new _(i,s);return i.emitter.trigger("resourceAdd",{resource:u,revert:function(){n.dispatch({type:"REMOVE_RESOURCE",resourceId:s.id})}}),u},r.CalendarApi.prototype.getResourceById=function(e){e=String(e);var r=this.getCurrentData();if(r.resourceStore){var t=r.resourceStore[e];if(t)return new _(r,t)}return null},r.CalendarApi.prototype.getResources=function(){var e=this.getCurrentData(),r=e.resourceStore,t=[];if(r)for(var n in r)t.push(new _(e,r[n]));return t},r.CalendarApi.prototype.getTopLevelResources=function(){var e=this.getCurrentData(),r=e.resourceStore,t=[];if(r)for(var n in r)r[n].parentId||t.push(new _(e,r[n]));return t},r.CalendarApi.prototype.refetchResources=function(){this.dispatch({type:"REFETCH_RESOURCES"})};var x=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return o(r,e),r.prototype.getKeyInfo=function(e){return s({"":{}},e.resourceStore)},r.prototype.getKeysForDateSpan=function(e){return[e.resourceId||""]},r.prototype.getKeysForEventDef=function(e){var r=e.resourceIds;return r.length?r:[""]},r}(r.Splitter);function O(e,r){return s(s({},r),{constraints:w(e,r.constraints)})}function w(e,r){return r.map((function(r){var t=r.defs;if(t)for(var n in t){var o=t[n].resourceIds;if(o.length&&-1===o.indexOf(e))return!1}return r}))}r.EventApi.prototype.getResources=function(){var e=this._context.calendarApi;return this._def.resourceIds.map((function(r){return e.getResourceById(r)}))},r.EventApi.prototype.setResources=function(e){for(var r=[],t=0,n=e;t<n.length;t++){var o=n[t],s=null;"string"==typeof o?s=o:"number"==typeof o?s=String(o):o instanceof _?s=o.id:console.warn("unknown resource type: "+o),s&&r.push(s)}this.mutate({standardProps:{resourceIds:r}})};var A={resources:function(e,r){r.getCurrentData().resourceSource._raw!==e&&r.dispatch({type:"RESET_RESOURCE_SOURCE",resourceSourceInput:e})}};var T=r.parseFieldSpecs("id,title");var U={initialResources:r.identity,resources:r.identity,eventResourceEditable:Boolean,refetchResourcesOnNavigate:Boolean,resourceOrder:r.parseFieldSpecs,filterResourcesWithEvents:Boolean,resourceGroupField:String,resourceAreaWidth:r.identity,resourceAreaColumns:r.identity,resourcesInitiallyExpanded:Boolean,datesAboveResources:Boolean,needsResourceData:Boolean,resourceAreaHeaderClassNames:r.identity,resourceAreaHeaderContent:r.identity,resourceAreaHeaderDidMount:r.identity,resourceAreaHeaderWillUnmount:r.identity,resourceGroupLabelClassNames:r.identity,resourceGroupLabelContent:r.identity,resourceGroupLabelDidMount:r.identity,resourceGroupLabelWillUnmount:r.identity,resourceLabelClassNames:r.identity,resourceLabelContent:r.identity,resourceLabelDidMount:r.identity,resourceLabelWillUnmount:r.identity,resourceLaneClassNames:r.identity,resourceLaneContent:r.identity,resourceLaneDidMount:r.identity,resourceLaneWillUnmount:r.identity,resourceGroupLaneClassNames:r.identity,resourceGroupLaneContent:r.identity,resourceGroupLaneDidMount:r.identity,resourceGroupLaneWillUnmount:r.identity},j={resourcesSet:r.identity,resourceAdd:r.identity,resourceChange:r.identity,resourceRemove:r.identity};function B(e){return r.createElement(r.ViewContextType.Consumer,null,(function(t){var n=t.options,o={resource:new _(t,e.resource),date:e.date?t.dateEnv.toDate(e.date):null,view:t.viewApi},s={"data-resource-id":e.resource.id,"data-date":e.date?r.formatDayString(e.date):void 0};return r.createElement(r.RenderHook,{hookProps:o,classNames:n.resourceLabelClassNames,content:n.resourceLabelContent,defaultContent:F,didMount:n.resourceLabelDidMount,willUnmount:n.resourceLabelWillUnmount},(function(r,t,n,o){return e.children(r,t,s,n,o)}))}))}function F(e){return e.resource.title||e.resource.id}h({ignoreRange:!0,parseMeta:function(e){return Array.isArray(e.resources)?e.resources:null},fetch:function(e,r){r({rawResources:e.resourceSource.meta})}}),h({parseMeta:function(e){return"function"==typeof e.resources?e.resources:null},fetch:function(e,t,n){var o=e.context.dateEnv,s=e.resourceSource.meta,i=e.range?{start:o.toDate(e.range.start),end:o.toDate(e.range.end),startStr:o.formatIso(e.range.start),endStr:o.formatIso(e.range.end),timeZone:o.timeZone}:{};r.unpromisify(s.bind(null,i),(function(e){t({rawResources:e})}),n)}}),h({parseMeta:function(e){return e.url?{url:e.url,method:(e.method||"GET").toUpperCase(),extraParams:e.extraParams}:null},fetch:function(e,t,n){var o=e.resourceSource.meta,i=function(e,r,t){var n,o,i,u,a=t.dateEnv,c=t.options,l={};r&&(null==(n=e.startParam)&&(n=c.startParam),null==(o=e.endParam)&&(o=c.endParam),null==(i=e.timeZoneParam)&&(i=c.timeZoneParam),l[n]=a.formatIso(r.start),l[o]=a.formatIso(r.end),"local"!==a.timeZone&&(l[i]=a.timeZone));u="function"==typeof e.extraParams?e.extraParams():e.extraParams||{};return s(l,u),l}(o,e.range,e.context);r.requestJson(o.method,o.url,i,(function(e,r){t({rawResources:e,xhr:r})}),(function(e,r){n({message:e,xhr:r})}))}});var N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buildDateFormat=r.memoize(H),t}return o(t,e),t.prototype.render=function(){var e=this,t=this.props,n=this.context,o=this.buildDateFormat(n.options.dayHeaderFormat,t.datesRepDistinctDays,t.dates.length);return r.createElement(r.NowTimer,{unit:"day"},(function(r,s){return 1===t.dates.length?e.renderResourceRow(t.resources,t.dates[0]):n.options.datesAboveResources?e.renderDayAndResourceRows(t.dates,o,s,t.resources):e.renderResourceAndDayRows(t.resources,t.dates,o,s)}))},t.prototype.renderResourceRow=function(e,t){var n=e.map((function(e){return r.createElement(k,{key:e.id,resource:e,colSpan:1,date:t})}));return this.buildTr(n,"resources")},t.prototype.renderDayAndResourceRows=function(e,t,n,o){for(var s=[],i=[],u=0,a=e;u<a.length;u++){var c=a[u];s.push(this.renderDateCell(c,t,n,o.length,null,!0));for(var l=0,d=o;l<d.length;l++){var p=d[l];i.push(r.createElement(k,{key:p.id+":"+c.toISOString(),resource:p,colSpan:1,date:c}))}}return r.createElement(r.Fragment,null,this.buildTr(s,"day"),this.buildTr(i,"resources"))},t.prototype.renderResourceAndDayRows=function(e,t,n,o){for(var s=[],i=[],u=0,a=e;u<a.length;u++){var c=a[u];s.push(r.createElement(k,{key:c.id,resource:c,colSpan:t.length,isSticky:!0}));for(var l=0,d=t;l<d.length;l++){var p=d[l];i.push(this.renderDateCell(p,n,o,1,c))}}return r.createElement(r.Fragment,null,this.buildTr(s,"day"),this.buildTr(i,"resources"))},t.prototype.renderDateCell=function(e,t,n,o,s,i){var u=this.props,a=s?":"+s.id:"",c=s?{resource:new _(this.context,s)}:{},l=s?{"data-resource-id":s.id}:{};return u.datesRepDistinctDays?r.createElement(r.TableDateCell,{key:e.toISOString()+a,date:e,dateProfile:u.dateProfile,todayRange:n,colCnt:u.dates.length*u.resources.length,dayHeaderFormat:t,colSpan:o,isSticky:i,extraHookProps:c,extraDataAttrs:l}):r.createElement(r.TableDowCell,{key:e.getUTCDay()+a,dow:e.getUTCDay(),dayHeaderFormat:t,colSpan:o,isSticky:i,extraHookProps:c,extraDataAttrs:l})},t.prototype.buildTr=function(e,t){var n=this.props.renderIntro;return e.length||(e=[r.createElement("td",{key:0}," ")]),r.createElement("tr",{key:t},n&&n(),e)},t}(r.BaseComponent);function H(e,t,n){return e||r.computeFallbackHeaderFormat(t,n)}var k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){var e=this.props;return r.createElement(B,{resource:e.resource,date:e.date},(function(t,n,o,i,u){return r.createElement("th",s({ref:t,className:["fc-col-header-cell","fc-resource"].concat(n).join(" "),colSpan:e.colSpan},o),r.createElement("div",{className:"fc-scrollgrid-sync-inner"},r.createElement("span",{className:["fc-col-header-cell-cushion",e.isSticky?"fc-sticky":""].join(" "),ref:i},u)))}))},t}(r.BaseComponent),M=function(){function e(e,r,t){this.dayTableModel=e,this.resources=r,this.context=t,this.resourceIndex=new z(r),this.rowCnt=e.rowCnt,this.colCnt=e.colCnt*r.length,this.cells=this.buildCells()}return e.prototype.buildCells=function(){for(var e=this.rowCnt,r=this.dayTableModel,t=this.resources,n=[],o=0;o<e;o++){for(var s=[],i=0;i<r.colCnt;i++)for(var u=0;u<t.length;u++){var a=t[u],c={resource:new _(this.context,a)},l={"data-resource-id":a.id},d=r.cells[o][i].date;s[this.computeCol(i,u)]={key:a.id+":"+d.toISOString(),date:d,resource:a,extraHookProps:c,extraDataAttrs:l,extraClassNames:["fc-resource"]}}n.push(s)}return n},e}(),L=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return o(r,e),r.prototype.computeCol=function(e,r){return r*this.dayTableModel.colCnt+e},r.prototype.computeColRanges=function(e,r,t){return[{firstCol:this.computeCol(e,t),lastCol:this.computeCol(r,t),isStart:!0,isEnd:!0}]},r}(M),V=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return o(r,e),r.prototype.computeCol=function(e,r){return e*this.resources.length+r},r.prototype.computeColRanges=function(e,r,t){for(var n=[],o=e;o<=r;o++){var s=this.computeCol(o,t);n.push({firstCol:s,lastCol:s,isStart:o===e,isEnd:o===r})}return n},r}(M),z=function(e){for(var r={},t=[],n=0;n<e.length;n++){var o=e[n].id;t.push(o),r[o]=n}this.ids=t,this.indicesById=r,this.length=e.length},G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getKeyInfo=function(e){var t=e.resourceDayTableModel,n=r.mapHash(t.resourceIndex.indicesById,(function(e){return t.resources[e]}));return n[""]={},n},t.prototype.getKeysForDateSpan=function(e){return[e.resourceId||""]},t.prototype.getKeysForEventDef=function(e){var r=e.resourceIds;return r.length?r:[""]},t}(r.Splitter),W=[],Z=function(){function e(){this.joinDateSelection=r.memoize(this.joinSegs),this.joinBusinessHours=r.memoize(this.joinSegs),this.joinFgEvents=r.memoize(this.joinSegs),this.joinBgEvents=r.memoize(this.joinSegs),this.joinEventDrags=r.memoize(this.joinInteractions),this.joinEventResizes=r.memoize(this.joinInteractions)}return e.prototype.joinProps=function(e,r){for(var t=[],n=[],o=[],s=[],u=[],a=[],c="",l=0,d=r.resourceIndex.ids.concat([""]);l<d.length;l++){var p=d[l],f=e[p];t.push(f.dateSelectionSegs),n.push(p?f.businessHourSegs:W),o.push(p?f.fgEventSegs:W),s.push(f.bgEventSegs),u.push(f.eventDrag),a.push(f.eventResize),c=c||f.eventSelection}return{dateSelectionSegs:this.joinDateSelection.apply(this,i([r],t)),businessHourSegs:this.joinBusinessHours.apply(this,i([r],n)),fgEventSegs:this.joinFgEvents.apply(this,i([r],o)),bgEventSegs:this.joinBgEvents.apply(this,i([r],s)),eventDrag:this.joinEventDrags.apply(this,i([r],u)),eventResize:this.joinEventResizes.apply(this,i([r],a)),eventSelection:c}},e.prototype.joinSegs=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];for(var n=e.resources.length,o=[],s=0;s<n;s++){for(var i=0,u=r[s];i<u.length;i++){var a=u[i];o.push.apply(o,this.transformSeg(a,e,s))}for(var c=0,l=r[n];c<l.length;c++){a=l[c];o.push.apply(o,this.transformSeg(a,e,s))}}return o},e.prototype.expandSegs=function(e,r){for(var t=e.resources.length,n=[],o=0;o<t;o++)for(var s=0,i=r;s<i.length;s++){var u=i[s];n.push.apply(n,this.transformSeg(u,e,o))}return n},e.prototype.joinInteractions=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];for(var n=e.resources.length,o={},i=[],u=!1,a=!1,c=0;c<n;c++){var l=r[c];if(l){u=!0;for(var d=0,p=l.segs;d<p.length;d++){var f=p[d];i.push.apply(i,this.transformSeg(f,e,c))}s(o,l.affectedInstances),a=a||l.isEvent}if(r[n])for(var h=0,v=r[n].segs;h<v.length;h++){f=v[h];i.push.apply(i,this.transformSeg(f,e,c))}}return u?{affectedInstances:o,segs:i,isEvent:a}:null},e}();function K(e,r,t,n,o,s){var i=[];return function e(r,t,n,o,s,i,u){for(var a=0;a<r.length;a++){var c=r[a],l=c.group;if(l)if(n){var d=t.length,p=o.length;if(e(c.children,t,n,o.concat(0),s,i,u),d<t.length){var f=t[d];(f.rowSpans=f.rowSpans.slice())[p]=t.length-d}}else{var h=l.spec.field+":"+l.value,v=null!=i[h]?i[h]:u;t.push({id:h,group:l,isExpanded:v}),v&&e(c.children,t,n,o,s+1,i,u)}else if(c.resource){h=c.resource.id,v=null!=i[h]?i[h]:u;t.push({id:h,rowSpans:o,depth:s,isExpanded:v,hasChildren:Boolean(c.children.length),resource:c.resource,resourceFields:c.resourceFields}),v&&e(c.children,t,n,o,s+1,i,u)}}}(function(e,r,t,n){var o=function(e,r){var t={};for(var n in e){var o=e[n];t[n]={resource:o,resourceFields:X(o),children:[]}}for(var n in e){if((o=e[n]).parentId){var s=t[o.parentId];s&&J(t[n],s.children,r)}}return t}(e,n),s=[];for(var i in o){var u=o[i];u.resource.parentId||q(u,s,t,0,r,n)}return s}(e,n?-1:1,r,t),i,n,[],0,o,s),i}function q(e,t,n,o,s,i){n.length&&(-1===s||o<=s)?q(e,function(e,t,n){var o,s,i=e.resourceFields[n.field];if(n.order)for(s=0;s<t.length;s++){if((a=t[s]).group){var u=r.flexibleCompare(i,a.group.value)*n.order;if(0===u){o=a;break}if(u<0)break}}else for(s=0;s<t.length;s++){var a;if((a=t[s]).group&&i===a.group.value){o=a;break}}o||(o={group:{value:i,spec:n},children:[]},t.splice(s,0,o));return o}(e,t,n[0]).children,n.slice(1),o+1,s,i):J(e,t,i)}function J(e,t,n){var o;for(o=0;o<t.length;o++){if(r.compareByFieldSpecs(t[o].resourceFields,e.resourceFields,n)>0)break}t.splice(o,0,e)}function X(e){var r=s(s(s({},e.extendedProps),e.ui),e);return delete r.ui,delete r.extendedProps,r}var Y=r.createPlugin({deps:[t],reducers:[function(e,r,t){var n=E(e&&e.resourceSource,r,t);return{resourceSource:n,resourceStore:D(e&&e.resourceStore,r,n,t),resourceEntityExpansions:function(e,r){var t;if(!e||!r)return{};switch(r.type){case"SET_RESOURCE_ENTITY_EXPANDED":return s(s({},e),((t={})[r.id]=r.isExpanded,t));default:return e}}(e&&e.resourceEntityExpansions,r),loadingLevel:t.loadingLevel+(n&&n.isFetching?1:0)}}],eventRefiners:P,eventDefMemberAdders:[function(e){return{resourceIds:(r=e.resourceIds,(r||[]).map((function(e){return String(e)}))).concat(e.resourceId?[e.resourceId]:[]),resourceEditable:e.resourceEditable};var r}],isDraggableTransformers:[function(e,r,t,n){if(!e){var o=n.getCurrentData();if(o.viewSpecs[o.currentViewType].optionDefaults.needsResourceData&&u(r,n))return!0}return e}],eventDragMutationMassagers:[function(e,r,t){var n=r.dateSpan.resourceId,o=t.dateSpan.resourceId;n&&o&&n!==o&&(e.resourceMutation={matchResourceId:n,setResourceId:o})}],eventDefMutationAppliers:[function(e,r,t){var n=r.resourceMutation;if(n&&u(e,t)){var o=e.resourceIds.indexOf(n.matchResourceId);if(-1!==o){var s=e.resourceIds.slice();s.splice(o,1),-1===s.indexOf(n.setResourceId)&&s.push(n.setResourceId),e.resourceIds=s}}}],dateSelectionTransformers:[function(e,r){var t=e.dateSpan.resourceId,n=r.dateSpan.resourceId;if(t&&n)return(!1!==e.component.allowAcrossResources||t===n)&&{resourceId:t}}],datePointTransforms:[function(e,r){return e.resourceId?{resource:r.calendarApi.getResourceById(e.resourceId)}:{}}],dateSpanTransforms:[function(e,r){return e.resourceId?{resource:r.calendarApi.getResourceById(e.resourceId)}:{}}],viewPropsTransformers:[a,l],isPropsValid:function(e,t){var n=(new x).splitProps(s(s({},e),{resourceStore:t.getCurrentData().resourceStore}));for(var o in n){var i=n[o];if(o&&n[""]&&(i=s(s({},i),{eventStore:r.mergeEventStores(n[""].eventStore,i.eventStore),eventUiBases:s(s({},n[""].eventUiBases),i.eventUiBases)})),!r.isPropsValid(i,t,{resourceId:o},O.bind(null,o)))return!1}return!0},externalDefTransforms:[function(e){return e.resourceId?{resourceId:e.resourceId}:{}}],eventResizeJoinTransforms:[function(e,r){if(!1===e.component.allowAcrossResources&&e.dateSpan.resourceId!==r.dateSpan.resourceId)return!1}],eventDropTransformers:[function(e,r){var t=e.resourceMutation;if(t){var n=r.calendarApi;return{oldResource:n.getResourceById(t.matchResourceId),newResource:n.getResourceById(t.setResourceId)}}return{oldResource:null,newResource:null}}],optionChangeHandlers:A,optionRefiners:U,listenerRefiners:j,propSetHandlers:{resourceStore:function(e,r){var t=r.emitter;t.hasHandlers("resourcesSet")&&t.trigger("resourcesSet",function(e,r){var t=[];for(var n in e)t.push(new _(r,e[n]));return t}(e,r))}}});return r.globalPlugins.push(Y),e.AbstractResourceDayTableModel=M,e.DEFAULT_RESOURCE_ORDER=T,e.DayResourceTableModel=V,e.ResourceApi=_,e.ResourceDayHeader=N,e.ResourceDayTableModel=L,e.ResourceLabelRoot=B,e.ResourceSplitter=x,e.VResourceJoiner=Z,e.VResourceSplitter=G,e.buildResourceFields=X,e.buildRowNodes=K,e.default=Y,e.flattenResources=function(e,r){return K(e,[],r,!1,{},!0).map((function(e){return e.resource}))},e.getPublicId=I,e.isGroupsEqual=function(e,r){return e.spec===r.spec&&e.value===r.value},e}({},FullCalendar,FullCalendarPremiumCommon);